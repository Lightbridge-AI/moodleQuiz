<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="combine_resp() is a generic function that combine student responses from Moodle Responses report(s) (not Grades report).
If the Moodle responses report has response column(s) that contained embedded answers (Cloze), you have an option to split them into different parts (one column for each).
Other functionality are similar to check_sub() such as: encode &amp;amp; filter student's attempts by state (i.e., &quot;Finished&quot; or &quot;In progress&quot;) and started time (&quot;Started on&quot; column),
cleans column names for easy manipulation, extracts student ID from &quot;Email address&quot;, and unites &quot;First name&quot; and &quot;Surname&quot; column into &quot;Name&quot;."><title>Combine Student's Responses — combine_resp • moodleQuiz</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.1.0/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.1.0/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Combine Student's Responses — combine_resp"><meta property="og:description" content="combine_resp() is a generic function that combine student responses from Moodle Responses report(s) (not Grades report).
If the Moodle responses report has response column(s) that contained embedded answers (Cloze), you have an option to split them into different parts (one column for each).
Other functionality are similar to check_sub() such as: encode &amp;amp; filter student's attempts by state (i.e., &quot;Finished&quot; or &quot;In progress&quot;) and started time (&quot;Started on&quot; column),
cleans column names for easy manipulation, extracts student ID from &quot;Email address&quot;, and unites &quot;First name&quot; and &quot;Surname&quot; column into &quot;Name&quot;."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">moodleQuiz</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9000</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item">
  <a class="nav-link" href="../articles/moodleQuiz.html">Get started</a>
</li>
<li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/Lightbridge-KS/moodleQuiz/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Combine Student's Responses</h1>
      <small class="dont-index">Source: <a href="https://github.com/Lightbridge-KS/moodleQuiz/blob/HEAD/R/combine_resp.R" class="external-link"><code>R/combine_resp.R</code></a></small>
      <div class="d-none name"><code>combine_resp.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p><code>combine_resp()</code> is a generic function that combine student responses from <a href="https://docs.moodle.org/311/en/Quiz_reports" class="external-link">Moodle Responses report(s)</a> (not Grades report).
If the Moodle responses report has response column(s) that contained <a href="https://docs.moodle.org/311/en/Embedded_Answers_(Cloze)_question_type" class="external-link">embedded answers (Cloze)</a>, you have an option to split them into different parts (one column for each).
Other functionality are similar to <code><a href="check_sub.html">check_sub()</a></code> such as: encode &amp; filter student's attempts by state (i.e., "Finished" or "In progress") and started time ("Started on" column),
cleans column names for easy manipulation, extracts student ID from "Email address", and unites "First name" and "Surname" column into "Name".</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="fu">combine_resp</span><span class="op">(</span>
  <span class="va">data</span>,
  extract_id_from <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Email address"</span>, <span class="st">"Institution"</span>, <span class="st">"Department"</span>, <span class="st">"ID number"</span><span class="op">)</span>,
  id_regex <span class="op">=</span> <span class="st">".*"</span>,
  sep_name <span class="op">=</span> <span class="st">" "</span>,
  state <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Finished"</span>, <span class="st">"In progress"</span><span class="op">)</span>,
  encode <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">0</span><span class="op">)</span>,
  choose_encode <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"max"</span>, <span class="st">"min"</span>, <span class="st">"all"</span><span class="op">)</span>,
  choose_time <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"first"</span>, <span class="st">"last"</span>, <span class="st">"all"</span><span class="op">)</span>,
  split_cloze <span class="op">=</span> <span class="cn">F</span>,
  part_glue <span class="op">=</span> <span class="st">"_part_"</span>,
  sep_col <span class="op">=</span> <span class="st">"_p_"</span>
<span class="op">)</span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>data</dt>
<dd><p>A data.frame <strong>or</strong> named list of data.frame of <a href="https://docs.moodle.org/311/en/Quiz_reports" class="external-link">Moodle Responses report(s)</a> (not Grades report)</p></dd>
<dt>extract_id_from</dt>
<dd><p>(Character) Choose 1 column to extract ID from</p></dd>
<dt>id_regex</dt>
<dd><p>(Character) A regular expression used to extract ID from column "Email address" in the Moodle Quiz report. The default is "<code>.*</code>" meaning all characters.
If your student email addresses has numeric IDs in them, try "<code>[:digit:]+</code>" to extract digits from the email.
<strong>Note</strong>: Regular expression syntax is the same as <a href="https://github.com/rstudio/cheatsheets/blob/master/strings.pdf" class="external-link">stringr</a>.</p></dd>
<dt>sep_name</dt>
<dd><p>A character in the new "Name" column that separate original "First name" and "Surname".</p></dd>
<dt>state</dt>
<dd><p>A character vector to match values in "State" column of the Moodle Quiz report</p></dd>
<dt>encode</dt>
<dd><p>An encoding numeric vector corresponding to <code>state</code>.
For example: by default, in the "State" column, "Finished" values will be encoded as <code>1</code>, and
"In progress" will be encoded as <code>0</code>.</p></dd>
<dt>choose_encode</dt>
<dd><p>A character to filter student's attempt by the <code>encode</code>ing.</p><ul><li><p><strong>"max"</strong> (default): return rows that have maximum encoding of each students.</p></li>
<li><p><strong>"min"</strong>: return rows that have minimum encoding of each students.</p></li>
<li><p><strong>"all"</strong>: no filter applied, return all rows.</p></li>
</ul></dd>
<dt>choose_time</dt>
<dd><p>A character to filter student's attempt by started time (determined by "Started on" column in Moodle Quiz report).
This filter applies <strong>after</strong> <code>choose_encode</code> has been applied to the data.</p><ul><li><p><strong>"first"</strong> (default): return rows that represent first attempt of each students.</p></li>
<li><p><strong>"last"</strong>: return rows that represent last attempt of each students.</p></li>
<li><p><strong>"all"</strong>: no filter applied, return all rows after applying <code>choose_encode</code></p></li>
</ul></dd>
<dt>split_cloze</dt>
<dd><p>(Logical) If the <code>data</code> has at least one response column(s) that contained <a href="https://docs.moodle.org/311/en/Embedded_Answers_(Cloze)_question_type" class="external-link">embedded answers (Cloze)</a>, <code>split_cloze = TRUE</code> will split them into different parts (one column for each).
If the <code>data</code> has no Cloze response columns, <code>split_cloze = TRUE</code> will result in error message. If <code>FALSE</code> (default), no Cloze column will be split.</p></dd>
<dt>part_glue</dt>
<dd><p>(Character) If <code>split_cloze = TRUE</code> and cloze response columns is presented, <code>part_glue</code> represent a character that <em>glues</em> the names of "Response" column and each "Parts" of Cloze columns together.</p></dd>
<dt>sep_col</dt>
<dd><p>(Character) If <code>data</code> is a named list of data.frame, <code>sep_col</code> indicate a character separation between names of list and "State" or "Response" columns.</p></dd>
</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p><strong>A data.frame</strong>, its output content is determined by class of its first argument: <code>data</code>.</p><ul><li><p>If the <code>data</code> is a data.frame; the output is an encoded, filtered, and cleaned data.frame of Moodle Responses report.</p></li>
<li><p>If the <code>data</code> is a named list of data.frame; the output is the same as previously described, but all Moodle Quiz reports are <a href="https://dplyr.tidyverse.org/reference/mutate-joins.html" class="external-link">full-joined</a> together by column "Name" and "ID".
So that, "Response" columns from each data.frame are sit together in a single data.frame. The resulting response columns are in this format (default): "&lt;listNames&gt;-Responses-&lt;number&gt;"</p></li>
</ul></div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span class="co"># Combine Response from 1 Quiz</span></span>
<span class="r-in"><span class="fu">combine_resp</span><span class="op">(</span><span class="va">responses_ls</span><span class="op">$</span><span class="va">Quiz_1</span>, id_regex <span class="op">=</span> <span class="st">"[:digit:]+"</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 26 × 10</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    Name            ID    Institution Department State Encode Started            </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>           <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dttm&gt;</span>             </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 1</span> Lance Xiong     004   <span style="color: #BB0000;">NA</span>          <span style="color: #BB0000;">NA</span>         Fini…      1 2022-04-19 <span style="color: #949494;">19:19:00</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 2</span> Sydney Halamic… 002   <span style="color: #BB0000;">NA</span>          <span style="color: #BB0000;">NA</span>         Fini…      1 2022-04-19 <span style="color: #949494;">16:32:00</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 3</span> Itzel Palomino  016   <span style="color: #BB0000;">NA</span>          <span style="color: #BB0000;">NA</span>         Fini…      1 2022-04-19 <span style="color: #949494;">12:36:00</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 4</span> Hakam el-Farooq 001   <span style="color: #BB0000;">NA</span>          <span style="color: #BB0000;">NA</span>         Fini…      1 2022-04-19 <span style="color: #949494;">06:46:00</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 5</span> Hamood al-Farha 012   <span style="color: #BB0000;">NA</span>          <span style="color: #BB0000;">NA</span>         Fini…      1 2022-04-19 <span style="color: #949494;">03:23:00</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 6</span> Dominique Solis 007   <span style="color: #BB0000;">NA</span>          <span style="color: #BB0000;">NA</span>         Fini…      1 2022-04-19 <span style="color: #949494;">09:03:00</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 7</span> Zhjade Alarid   009   <span style="color: #BB0000;">NA</span>          <span style="color: #BB0000;">NA</span>         Fini…      1 2022-04-19 <span style="color: #949494;">02:17:00</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 8</span> Jordan Tan      013   <span style="color: #BB0000;">NA</span>          <span style="color: #BB0000;">NA</span>         Fini…      1 2022-04-19 <span style="color: #949494;">12:10:00</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 9</span> Kevin Vasquez   025   <span style="color: #BB0000;">NA</span>          <span style="color: #BB0000;">NA</span>         Fini…      1 2022-04-19 <span style="color: #949494;">03:41:00</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">10</span> Angela Carrillo 018   <span style="color: #BB0000;">NA</span>          <span style="color: #BB0000;">NA</span>         Fini…      1 2022-04-19 <span style="color: #949494;">01:48:00</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># … with 16 more rows, and 3 more variables: Grade_2.00 &lt;chr&gt;,</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#   Response_1 &lt;chr&gt;, Response_2 &lt;chr&gt;</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># Combine Response from multiple quizzes into 1 data frame</span></span>
<span class="r-in"><span class="fu">combine_resp</span><span class="op">(</span><span class="va">responses_ls</span>, id_regex <span class="op">=</span> <span class="st">"[:digit:]+"</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 26 × 9</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    Name        ID    Quiz_1_State Quiz_1_Response… Quiz_1_Response… Quiz_2_State</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>            <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>            <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>       </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 1</span> Lance Xiong 004   Finished     intuitively sin… she replied. “T… Finished    </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 2</span> Sydney Hal… 002   Finished     Tarzan’s face w… the means of te… Finished    </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 3</span> Itzel Palo… 016   Finished     not to harm you… -                Finished    </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 4</span> Hakam el-F… 001   Finished     “A derelict,” w… “I fear,” mused… Finished    </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 5</span> Hamood al-… 012   Finished     At last they pa… Finding that it… Finished    </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 6</span> Dominique … 007   Finished     the powers of t… though he tried… Finished    </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 7</span> Zhjade Ala… 009   Finished     upon the unsusp… and fortune of … Finished    </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 8</span> Jordan Tan  013   Finished     “In time to sav… warriors filing… Finished    </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 9</span> Kevin Vasq… 025   Finished     A FRIEND.        Thus, making hi… Finished    </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">10</span> Angela Car… 018   Finished     very faithful a… “they were kill… Finished    </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># … with 16 more rows, and 3 more variables: Quiz_2_Response_1 &lt;chr&gt;,</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#   Quiz_2_Response_2 &lt;chr&gt;, Quiz_2_Response_3 &lt;chr&gt;</span></span>
<span class="r-in"></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Kittipos Sirivongrungson.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.2.</p>
</div>

    </footer></div>

  

  

  </body></html>

